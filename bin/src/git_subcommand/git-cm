#!/usr/bin/env ruby

# Refer to https://maku77.github.io/ruby/io/input-from-keyboard.html. Thanks a lot!
require 'readline'

puts 'Input a commit message'
puts "Type ^D (ctrl+d) to quit input\n\n"

puts 'Tips for good commit message:'
puts '  - try not to exceed yellow line to make commit summary easy to understand'
puts "  - avoid exceeding red line because commit summary cannot show on oneline on GitHub\n\n"

# show ruler
puts "  *********1*********2*********3*********4*********5\033[1;93m*********6*********\033[1;91m7*****\033[00m"

commit_message = ''
while line = Readline.readline('> ')
  commit_message += "#{line}\n"
end

puts ''

system("git commit -F- << EOF
#{commit_message}
EOF")
